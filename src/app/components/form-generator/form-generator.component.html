<form
  [formGroup]="form"
  (submit)="onSubmit(resetValidation)"
  #resetValidation="ngForm"
>
  <!-- #formDirective="ngForm" -->
  <ng-template ngFor let-input [ngForOf]="formPattern">
    <ng-container [ngSwitch]="input.controlType">
      <!-- handling text type inputs -->
      <ng-template [ngSwitchCase]="'file'">
        <img class="avatar" src="{{ avatar }}" alt="avatar" />
        <div class="form-group">
          <input
            [type]="input.valueType"
            [name]="input.controlName"
            [formControlName]="input.controlName"
            (change)="onSelectAvatar($event)"
          />
        </div>
      </ng-template>
      <ng-template [ngSwitchCase]="'text'">
        <div class="form-group">
          <mat-form-field>
            <input
              matInput
              [formControlName]="input.controlName"
              [type]="input.valueType"
              [name]="input.controlName"
              [placeholder]="input.placeholder"
            />
            <mat-error *ngIf="this.form.get(input.controlName).invalid">{{
              input.validation.err
            }}</mat-error>
          </mat-form-field>
        </div>
      </ng-template>
      <ng-template [ngSwitchCase]="'date'">
        <mat-card-actions>
          <div class="form-group">
            <mat-form-field>
              <input
                matInput
                [matDatepicker]="picker"
                [formControlName]="input.controlName"
                [type]="input.valueType"
                [name]="input.controlName"
                [placeholder]="input.placeholder"
              />
              <mat-datepicker-toggle
                matSuffix
                [for]="picker"
              ></mat-datepicker-toggle>
              <mat-datepicker
                #picker
                startView="year"
                [startAt]="startDate"
              ></mat-datepicker>
              <mat-error *ngIf="this.form.get(input.controlName).invalid">{{
                input.validation.err
              }}</mat-error>
            </mat-form-field>
          </div>
        </mat-card-actions>
      </ng-template>
    </ng-container>
  </ng-template>
  <button type="submit" [disabled]="form.invalid">Зберегти</button>
</form>
